ALTER TABLE MANITOU_TEST.DEMO_CUSTOMERS
 DROP PRIMARY KEY CASCADE;

DROP TABLE MANITOU_TEST.DEMO_CUSTOMERS CASCADE CONSTRAINTS;

CREATE TABLE MANITOU_TEST.DEMO_CUSTOMERS
(
  CUSTOMER_ID           NUMBER                  NOT NULL,
  CUST_FIRST_NAME       VARCHAR2(20 BYTE)       NOT NULL,
  CUST_LAST_NAME        VARCHAR2(20 BYTE)       NOT NULL,
  CUST_STREET_ADDRESS1  VARCHAR2(60 BYTE),
  CUST_STREET_ADDRESS2  VARCHAR2(60 BYTE),
  CUST_CITY             VARCHAR2(30 BYTE),
  CUST_STATE            VARCHAR2(2 BYTE),
  CUST_POSTAL_CODE      VARCHAR2(10 BYTE),
  PHONE_NUMBER1         VARCHAR2(25 BYTE),
  PHONE_NUMBER2         VARCHAR2(25 BYTE),
  CREDIT_LIMIT          NUMBER(9,2),
  CUST_EMAIL            VARCHAR2(30 BYTE)
)
TABLESPACE USERS
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
MONITORING;


CREATE INDEX MANITOU_TEST.DEMO_CUST_NAME_IX ON MANITOU_TEST.DEMO_CUSTOMERS
(CUST_LAST_NAME, CUST_FIRST_NAME)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );

CREATE UNIQUE INDEX MANITOU_TEST.DEMO_CUSTOMERS_PK ON MANITOU_TEST.DEMO_CUSTOMERS
(CUSTOMER_ID)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );

CREATE OR REPLACE TRIGGER MANITOU_TEST."INSERT_DEMO_CUST"
BEFORE INSERT ON MANITOU_TEST.DEMO_CUSTOMERS
FOR EACH ROW
DECLARE
  cust_id number;
BEGIN
  SELECT demo_cust_seq.nextval
    INTO cust_id
    FROM dual;
  :new.CUSTOMER_ID := cust_id;
END;
/


ALTER TABLE MANITOU_TEST.DEMO_CUSTOMERS ADD (
  CONSTRAINT DEMO_CUST_CREDIT_LIMIT_MAX
  CHECK (credit_limit <= 5000)
  ENABLE VALIDATE,
  CONSTRAINT DEMO_CUSTOMERS_PK
  PRIMARY KEY
  (CUSTOMER_ID)
  USING INDEX MANITOU_TEST.DEMO_CUSTOMERS_PK
  ENABLE VALIDATE);
